# PDF Q&A Application

This is a full-stack application that allows users to upload PDF documents and ask questions about their content. The backend uses FastAPI and LlamaIndex for processing and answering questions, while the frontend is built with Vite and React.js.

## Features

- Upload PDF files
- Ask questions about the content of uploaded PDFs
- Receive AI-generated answers

## Prerequisites

- Node.js and npm (or yarn)
- Python 3.10 or later
- An OpenAI API key (get one from https://platform.openai.com/account/api-keys)

## Installation

### Backend

1. **Navigate to the `server` directory:**

   ```bash
   cd server
   ```
2. **Create and activate a virtual environment:**

   ```bash
   python -m venv venv
   source venv/bin/activate  # On macOS/Linux
   venv\Scripts\activate     # On Windows
   ```
3. **Install backend dependencies:**

   ```bash
   pip install -r requirements.txt
   ```
4. **Set up your OpenAI API key:**

   * Create a `.env` file in the `server` directory and add:
     ```
     OPENAI_API_KEY=your_actual_openai_api_key
     ```
   * Replace `your_actual_openai_api_key` with your real OpenAI API key.
5. **Start the backend server:**

   ```bash
   uvicorn app.main:app --reload
   ```

### Frontend

1. **Navigate to the `client` directory:**

   ```bash
   cd client
   ```
2. **Install frontend dependencies:**

   ```bash
   npm install  # Or yarn install
   ```
3. **Start the frontend development server:**

   ```bash
   npm run dev # Or yarn dev
   ```

## API Endpoints

### 1. Upload PDF

* **Endpoint:**`/pdf/upload/`
* **Method:**`POST`
* **Request Body:**
  * `file` (multipart/form-data): The PDF file to upload.
* **Response:**
  * `{"file_id": file_id}` (JSON): A unique ID for the uploaded and processed PDF.

**Example (curl):**

Bash

```
curl -X POST http://127.0.0.1:8000/pdf/upload/ -F file=@your_pdf_file.pdf
```

### 2. Ask Question

* **Endpoint:**`/pdf/ask/`
* **Method:**`POST`
* **Request Body (JSON):**
  * `file_id` (string): The unique ID of the PDF file obtained from the upload response.
  * `question` (string): The question to ask about the PDF content.
* **Response:**
  * `{"answer": answer}` (JSON): The answer to the question.

**Example (curl):**

Bash

```
curl -X POST http://127.0.0.1:8000/pdf/ask/ -H "Content-Type: application/json" -d '{"file_id": "your_file_id", "question": "Your question here"}'
```

## Frontend Components (Client)

- **`App.jsx`:**  The main component that renders the application layout.
- **`Chats.jsx`:** Manages the chat history.
- **`Messager.jsx`:** Handles the user's message input.
- **`NavBar.jsx`:** Provides navigation and actions related to the uploaded PDF.

## How to Use

1. **Start both servers:**

   * The backend server (in the `server` directory).
   * The frontend development server (in the `client` directory).
2. **Upload a PDF:**

   * Use the file upload component in the frontend to select and upload a PDF.
3. **Ask Questions:**

   * Type your questions in the question input area.
   * The application will send the question to the backend, which will process the PDF and return the answer.
4. **View Answers:**

   * The answers will be displayed in the chat area.

## Additional Notes

* The frontend communicates with the backend via API requests.
* This setup is optimized for development. For production, consider:
  * Building the frontend for production (`npm run build` or `yarn build`)
  * Deploying both frontend and backend to a suitable hosting environment.


---

Setup for nextjs-saas-dev in Local
==================================

Pre requisites
==============

---

1. NGROK Part

---

=> Create account
=> On Dashboard(website)/Cloud Edge/Domains
=> Generate a new domain (1st is free) => ngrok http --domain=your-personal-domain.ngrok-free.app 3000
=> Download and installl in local (set envionement variable also)
check the installation by running in cmd

---

2. CLERK Part

---

=> Create account
=> Create apllication (any relevant name)
=> Allow creating organizations on app_name/Configure/Organization Settings
=> Customize session token on app_name/Configure/Sessions and click edit and set value as => {"metadata": "{{user.public_metadata}}" }
=> Create webhook on app_name/configure/webhooks,
=> set custom url to  https://<Serverdomain>/en/api/clerk generated by ngrok,
=> subscribe to "Organization" and "User" events

=> temporary superadin access has to be given as of now

---

3. ENODE Part

---

=> Create account
=> Create org
=> Create client on Dahboard, set client enivornment as Sandbox, keep both name same (client and link UI)

---

4. SQL Part

---

=> Download & Install MySQL server
=> Setup & Start the Sever (setup user as well if new)
=> Create a database

---

5. Code Part

---

=> install all dependecies using => npm i

---

Setting Envionement Variables Part
----------------------------------

=> DATABASE_URL
Set your local mysql connection url
mysql://host_name:host_password@loaclhost:port_number/db_name

=> NEXT_PUBLIC_DEMO_MODE
Set to true

=> NEXT_PUBLIC_CLERK_WEBHOOK_SECRET
Copy "Signing Secret" from app_name/configure/webhooks and open the endpoint

=> NEXT_PUBLIC_ROOT_DOMAIN
Copy your ng rock domain (text between --domain= & port_number)

=> NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY
Copy from Clerk app_name/Developers/API Keys

=> CLERK_SECRET_KEY
Copy from Clerk app_name/Developers/API Keys

=> ENODE_OAUTH_URL
Copy from Enode Dashboard => client_name/Settings/API Credntials

=> ENODE_CLIENT_ID
Copy from Enode Dashboard => client_name/Settings/API Credntials

=> ENODE_CLIENT_SECRET
Copy from Enode Dashboard => client_name/Settings/API Credntials

=> ENODE_BASE_URL
Set as https://enode-api.sandbox.enode.io

=> ENODE_VEHICLE_ADD_REDIRECT
Set as http://localhost:3000/en/home/vehicles

==================================
Starting the app (do in sequence)
=================================

---

1. Start NGROK local server

---

=> open cmd and run
=> ngrok http --domain=your-personal-domain.ngrok-free.app 3000

---

2. Update the local db

---

=> open cmd in app folder
=> install prisma by => npm i prisma (-g => if want to install globally)
=> populate the db => npx prisma migrate dev (--name init => optional)

---

3. Setting Variable (in windows)

---

=> in cmd set all variable from env file
=> set variable_name

---

1. Start APP

---

=> open cmd and run
=> npm run dev
