Setup for nextjs-saas-dev in Local
==================================

Pre requisites
==============

---

1. NGROK Part

---

=> Create account
=> On Dashboard(website)/Cloud Edge/Domains
=> Generate a new domain (1st is free) => ngrok http --domain=your-personal-domain.ngrok-free.app 3000
=> Download and installl in local (set envionement variable also)
check the installation by running in cmd

---

2. CLERK Part

---

=> Create account
=> Create apllication (any relevant name)
=> Allow creating organizations on app_name/Configure/Organization Settings
=> Customize session token on app_name/Configure/Sessions and click edit and set value as => {"metadata": "{{user.public_metadata}}" }
=> Create webhook on app_name/configure/webhooks,
=> set custom url to  https://<Serverdomain>/en/api/clerk generated by ngrok,
=> subscribe to "Organization" and "User" events

=> temporary superadin access has to be given as of now

---

3. ENODE Part

---

=> Create account
=> Create org
=> Create client on Dahboard, set client enivornment as Sandbox, keep both name same (client and link UI)

---

4. SQL Part

---

=> Download & Install MySQL server
=> Setup & Start the Sever (setup user as well if new)
=> Create a database

---

5. Code Part

---

=> install all dependecies using => npm i

---

Setting Envionement Variables Part
----------------------------------

=> DATABASE_URL
Set your local mysql connection url
mysql://host_name:host_password@loaclhost:port_number/db_name

=> NEXT_PUBLIC_DEMO_MODE
Set to true

=> NEXT_PUBLIC_CLERK_WEBHOOK_SECRET
Copy "Signing Secret" from app_name/configure/webhooks and open the endpoint

=> NEXT_PUBLIC_ROOT_DOMAIN
Copy your ng rock domain (text between --domain= & port_number)

=> NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY
Copy from Clerk app_name/Developers/API Keys

=> CLERK_SECRET_KEY
Copy from Clerk app_name/Developers/API Keys

=> ENODE_OAUTH_URL
Copy from Enode Dashboard => client_name/Settings/API Credntials

=> ENODE_CLIENT_ID
Copy from Enode Dashboard => client_name/Settings/API Credntials

=> ENODE_CLIENT_SECRET
Copy from Enode Dashboard => client_name/Settings/API Credntials

=> ENODE_BASE_URL
Set as https://enode-api.sandbox.enode.io

=> ENODE_VEHICLE_ADD_REDIRECT
Set as http://localhost:3000/en/home/vehicles

==================================
Starting the app (do in sequence)
=================================

---

1. Start NGROK local server

---

=> open cmd and run
=> ngrok http --domain=your-personal-domain.ngrok-free.app 3000

---

2. Update the local db

---

=> open cmd in app folder
=> install prisma by => npm i prisma (-g => if want to install globally)
=> populate the db => npx prisma migrate dev (--name init => optional)

---

3. Setting Variable (in windows)

---

=> in cmd set all variable from env file
=> set variable_name

---

1. Start APP

---

=> open cmd and run
=> npm run dev
